<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            border-radius: 4px;
        }
        .success {
            color: #27ae60;
            font-weight: bold;
        }
        .error {
            color: #e74c3c;
            font-weight: bold;
        }
        .warning {
            color: #f39c12;
            font-weight: bold;
        }
        .info {
            color: #3498db;
        }
        pre {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .summary {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 4px;
            margin-top: 30px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background: #3498db;
            color: white;
        }
        tr:hover {
            background: #f5f5f5;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</h1>
        <p><strong>–î–∞—Ç–∞:</strong> 2025-11-20 14:05</p>
        <p><strong>–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–π —Ñ–∞–π–ª:</strong> –í—ã–≥—Ä—É–∑–∫–∞_–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã_ERPWE_Unknown_Unknown_2025_11_20_13_27_39.db</p>

        <h2>‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>

        <div class="test-section">
            <h3>1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞</h3>
            <p class="success">‚úì –§–∞–π–ª –Ω–∞–π–¥–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω</p>
            <ul>
                <li><strong>–ü—É—Ç—å:</strong> data/uploads/–í—ã–≥—Ä—É–∑–∫–∞_–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã_ERPWE_Unknown_Unknown_2025_11_20_13_27_39.db</li>
                <li><strong>–†–∞–∑–º–µ—Ä:</strong> 1.65 MB</li>
                <li><strong>–ü–∞—Ç—Ç–µ—Ä–Ω:</strong> –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—É "–í—ã–≥—Ä—É–∑–∫–∞_–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã_*"</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>2. –§—É–Ω–∫—Ü–∏—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
            <p class="success">‚úì –§—É–Ω–∫—Ü–∏—è ScanForDatabaseFiles —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</p>
            <pre>–†–µ–∑—É–ª—å—Ç–∞—Ç: –ù–∞–π–¥–µ–Ω–æ 1 —Ñ–∞–π–ª
E:\HttpServer\data\uploads\–í—ã–≥—Ä—É–∑–∫–∞_–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã_ERPWE_Unknown_Unknown_2025_11_20_13_27_39.db</pre>
        </div>

        <div class="test-section">
            <h3>3. API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã</h3>
            <table>
                <tr>
                    <th>–≠–Ω–¥–ø–æ–∏–Ω—Ç</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</th>
                </tr>
                <tr>
                    <td>GET /api/databases/pending</td>
                    <td class="error">404 Not Found</td>
                    <td>–¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞</td>
                </tr>
                <tr>
                    <td>POST /api/databases/scan</td>
                    <td class="error">404 Not Found</td>
                    <td>–¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞</td>
                </tr>
                <tr>
                    <td>GET /api/clients</td>
                    <td class="success">200 OK</td>
                    <td>–†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</td>
                </tr>
                <tr>
                    <td>GET /health</td>
                    <td class="success">200 OK</td>
                    <td>–†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</td>
                </tr>
            </table>
        </div>

        <div class="test-section">
            <h3>4. Service Database</h3>
            <p class="warning">‚ö† –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ service.db</p>
            <p><strong>–û—à–∏–±–∫–∞:</strong> failed to initialize service schema: failed to create service schema: no such column: tax_id</p>
            <p><strong>–ü—Ä–∏—á–∏–Ω–∞:</strong> –£—Å—Ç–∞—Ä–µ–≤—à–∞—è —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö service.db —Ç—Ä–µ–±—É–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏</p>
            <p><strong>–†–µ—à–µ–Ω–∏–µ:</strong> –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ö–µ–º—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å service.db</p>
        </div>

        <div class="summary">
            <h2>üìã –ò—Ç–æ–≥–æ–≤—ã–π –≤—ã–≤–æ–¥</h2>
            <h3 class="success">–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:</h3>
            <ul>
                <li>‚úì –§–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞–π–¥–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω</li>
                <li>‚úì –§—É–Ω–∫—Ü–∏—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</li>
                <li>‚úì –§–∞–π–ª —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±—É–µ–º–æ–º—É –ø–∞—Ç—Ç–µ—Ä–Ω—É</li>
                <li>‚úì –û—Å–Ω–æ–≤–Ω—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (health, clients) —Ä–∞–±–æ—Ç–∞—é—Ç</li>
            </ul>

            <h3 class="warning">–¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:</h3>
            <ul>
                <li>‚ö† –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã /api/databases/pending –∏ /api/databases/scan –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 404</li>
                <li>‚ö† Service database —Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º—ã</li>
            </ul>

            <h3 class="info">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</h3>
            <ol>
                <li>–ò—Å–ø—Ä–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –¥–ª—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ pending databases –∏ scan</li>
                <li>–û–±–Ω–æ–≤–∏—Ç—å —Å—Ö–µ–º—É service.db –∏–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö</li>
                <li>–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª: —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí pending ‚Üí –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –ø—Ä–æ–µ–∫—Ç—É</li>
            </ol>
        </div>

        <h2>üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏</h2>
        <div class="test-section">
            <h3>–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:</h3>
            <ul>
                <li><code>server.ScanForDatabaseFiles()</code> - —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úì</li>
                <li><code>server.MoveDatabaseToUploads()</code> - –Ω–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∞—Å—å</li>
                <li><code>database.GetPendingDatabases()</code> - —Ç—Ä–µ–±—É–µ—Ç serviceDB</li>
                <li><code>database.CreatePendingDatabase()</code> - —Ç—Ä–µ–±—É–µ—Ç serviceDB</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞:</h3>
            <pre>–ò–º—è: –í—ã–≥—Ä—É–∑–∫–∞_–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã_ERPWE_Unknown_Unknown_2025_11_20_13_27_39.db
–ü—É—Ç—å: E:\HttpServer\data\uploads\
–†–∞–∑–º–µ—Ä: 1,732,608 –±–∞–π—Ç (1.65 MB)
–¢–∏–ø: SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
–ü–∞—Ç—Ç–µ—Ä–Ω: –í—ã–≥—Ä—É–∑–∫–∞_–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã_* ‚úì</pre>
        </div>
    </div>
</body>
</html>

