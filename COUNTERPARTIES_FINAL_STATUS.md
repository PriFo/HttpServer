# –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å: –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ –ø–æ –∫–ª–∏–µ–Ω—Ç—É

**–î–∞—Ç–∞**: 2025-01-21  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û –ò –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û**

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- ‚úÖ –í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç

### 2. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### Backend:
- ‚úÖ Endpoint `/api/counterparties/all` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤
- ‚úÖ Endpoint `/api/counterparties/all/export` –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–ø—Ä–æ–µ–∫—Ç, –∏—Å—Ç–æ—á–Ω–∏–∫, –ø–æ–∏—Å–∫, –∫–∞—á–µ—Å—Ç–≤–æ)
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

#### Frontend:
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `CounterpartiesTab` —Å –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–æ–µ–∫—Ç—É
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö / –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ)
- ‚úÖ –ü–æ–∏—Å–∫ —Å debounce (500ms)
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –ø–æ–ª—è–º
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV –∏ JSON
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π UI —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (`selectedSource !== "all"`)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `useCallback` –∏ `useMemo`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å `filteredItems` ‚Üí `items`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞

---

## üìä –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:
1. **–ü—Ä–æ–µ–∫—Ç** - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø—Ä–æ–µ–∫—Ç—É
2. **–ò—Å—Ç–æ—á–Ω–∏–∫** - "–í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏", "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö", "–ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ"
3. **–ü–æ–∏—Å–∫** - –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –ò–ù–ù, –ë–ò–ù (debounce 500ms)

### –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:
- –ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- –ü–æ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–º—É –Ω–∞–∑–≤–∞–Ω–∏—é
- –ü–æ –ò–ù–ù/–ë–ò–ù
- –ü–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É
- –ü–æ —Å—Ç—Ä–∞–Ω–µ
- –ü–æ —Å—Ç–∞—Ç—É—Å—É

### –≠–∫—Å–ø–æ—Ä—Ç:
- CSV —Ñ–æ—Ä–º–∞—Ç
- JSON —Ñ–æ—Ä–º–∞—Ç
- –£—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ

---

## üîç API Endpoints

### GET `/api/counterparties/all`
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `client_id` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
- `project_id` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `source` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: "database", "normalized")
- `search` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `sort_by`, `order` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `offset`, `limit` (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)
- `min_quality`, `max_quality` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### GET `/api/counterparties/all/export`
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: —Ç–µ –∂–µ, —á—Ç–æ –∏ –≤ `/api/counterparties/all`, –ø–ª—é—Å:
- `format` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π: "csv" –∏–ª–∏ "json")

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤–æ–µ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- ‚úÖ –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä API endpoints
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø–æ–∏—Å–∫, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π UI
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- ‚úÖ –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ï–ù–£**

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 2025-01-21

