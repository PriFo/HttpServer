# Инструкция по запуску бэкенда

## Текущая ситуация

✅ **Фронтенд работает** на порту 3000  
❌ **Бэкенд не запущен** на порту 9999

## Решение: Запуск бэкенда

### Способ 1: Через готовый exe файл (РЕКОМЕНДУЕТСЯ)

1. Откройте **новое окно PowerShell** или CMD
2. Перейдите в папку проекта:
   ```powershell
   cd E:\HttpServer
   ```
3. Запустите скрипт:
   ```powershell
   .\start-backend-exe.bat
   ```
   
   Или вручную:
   ```powershell
   $env:ARLIAI_API_KEY='597dbe7e-16ca-4803-ab17-5fa084909f37'
   .\httpserver_no_gui.exe
   ```

### Способ 2: Через go run (для просмотра логов)

1. Откройте **новое окно PowerShell**
2. Выполните:
   ```powershell
   cd E:\HttpServer
   $env:ARLIAI_API_KEY='597dbe7e-16ca-4803-ab17-5fa084909f37'
   $env:SERVER_PORT='9999'
   go run -tags no_gui main_no_gui.go
   ```

### Ожидаемый вывод при успешном запуске:

```
Запуск 1C HTTP Server (без GUI)...
Используется существующая база данных: 1c_data.db
Сервер запущен на порту 9999
API доступно по адресу: http://localhost:9999
Для остановки нажмите Ctrl+C
```

## Проверка работы

После запуска бэкенда:

1. **Проверьте в браузере:**
   - Откройте: http://localhost:9999/api/dashboard/stats
   - Должен вернуться JSON с данными

2. **Обновите фронтенд:**
   - Откройте: http://localhost:3000
   - Нажмите F5 для обновления страницы
   - Ошибки должны исчезнуть

## Устранение проблем

### Ошибка: "Порт 9999 уже занят"

```powershell
# Найти процесс
netstat -ano | findstr :9999

# Убить процесс (замените PID на реальный номер)
taskkill /F /PID <номер_процесса>
```

### Ошибка: "Ошибка создания базы данных"

Убедитесь, что файлы БД существуют:
- `1c_data.db` или `data.db`
- `normalized_data.db`
- `service.db`

### Ошибка: "ARLIAI_API_KEY not set"

Установите переменную окружения:
```powershell
$env:ARLIAI_API_KEY='597dbe7e-16ca-4803-ab17-5fa084909f37'
```

## После успешного запуска

1. ✅ Бэкенд работает на http://localhost:9999
2. ✅ Фронтенд работает на http://localhost:3000
3. ✅ Фронтенд может подключиться к бэкенду
4. ✅ Данные загружаются на главной странице

**Не закрывайте окно с бэкендом!** Оно должно оставаться открытым.

