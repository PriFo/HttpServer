# Быстрый старт: Тестирование нормализации контрагентов

## Быстрая проверка

### 1. Проверка компиляции
```bash
go build normalization/test_real_databases.go
```

### 2. Просмотр справки
```bash
go run normalization/test_real_databases.go --help
```

### 3. Тестирование одной базы (для проверки)
```bash
go run normalization/test_real_databases.go data/uploads/Выгрузка_Контрагенты_*.db --limit 10 --verbose
```

### 4. Полное тестирование всех баз
```bash
go run normalization/test_real_databases.go --all --json results.json --verbose
```

## Что проверяется

1. **Открытие баз данных** - проверка доступности и корректности структуры
2. **Извлечение контрагентов** - получение данных из различных таблиц
3. **Нормализация** - обработка всех контрагентов
4. **Извлечение данных** - ИНН/БИН, адреса, контакты, банковские реквизиты
5. **Сохранение результатов** - проверка записи в ServiceDB
6. **Статистика** - детальный отчет по каждой базе

## Результаты

### Консольный вывод
- Статус обработки каждой базы
- Количество обработанных контрагентов
- Статистика по извлеченным данным
- Процентное соотношение
- Итоговая сводка

### JSON экспорт (если указан --json)
- Полный отчет со всеми результатами
- Детальная статистика по каждой базе
- Временные метки
- Ошибки и предупреждения

## Примеры использования

### Базовое тестирование
```bash
go run normalization/test_real_databases.go --all
```

### С ограничением и экспортом
```bash
go run normalization/test_real_databases.go --all --limit 100 --json test_results.json
```

### Подробный режим
```bash
go run normalization/test_real_databases.go --all --verbose
```

### Тестирование конкретных баз
```bash
go run normalization/test_real_databases.go \
  data/uploads/db1.db \
  data/uploads/db2.db \
  --json results.json
```

## Интерпретация результатов

### Успешный тест
- Все базы обработаны без ошибок
- Статистика показывает извлечение данных
- Процент извлеченных данных > 0

### Проблемы
- **Ошибка открытия БД** - файл поврежден или недоступен
- **Нет контрагентов** - база пустая или структура отличается
- **Ошибка нормализации** - проблема в логике обработки
- **Низкий процент извлечения** - данные в нестандартном формате

## Следующие шаги

1. Проанализировать JSON отчет
2. Выявить проблемные базы
3. Улучшить extractors на основе реальных данных
4. Повторить тестирование

