# üîß –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è helper-—Ñ—É–Ω–∫—Ü–∏–π

## –î–∞—Ç–∞: –¢–µ–∫—É—â–∞—è —Å–µ—Å—Å–∏—è

## –û–±–∑–æ—Ä

–ü—Ä–æ–≤–µ–¥–µ–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö E2E —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –µ–¥–∏–Ω—ã—Ö helper-—Ñ—É–Ω–∫—Ü–∏–π –∏–∑ `test-helpers.ts` –≤–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ Playwright API.

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### 1. `quality-management.spec.ts`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç: `waitForPageLoad`, `waitForText`, `clickIfVisible`, `checkToast`, `logPageInfo`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `page.waitForLoadState('networkidle')` –Ω–∞ `waitForPageLoad(page)`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã `page.waitForTimeout()` –Ω–∞ `waitForPageLoad(page)` –≥–¥–µ —É–º–µ—Å—Ç–Ω–æ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ `checkToast()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `logPageInfo()` –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

#### 2. `error-handling.spec.ts`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç: `waitForPageLoad`, `logPageInfo`, `checkToast`, `waitForOperation`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `page.waitForLoadState('networkidle')` –Ω–∞ `waitForPageLoad(page)`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ `checkToast()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –∏–º–ø–æ—Ä—Ç

#### 3. `full-project-e2e.spec.ts`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç: `waitForPageLoad`, `logPageInfo`, `checkToast`, `waitForOperation`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `page.waitForLoadState('networkidle')` –Ω–∞ `waitForPageLoad(page)`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã `page.waitForTimeout()` –Ω–∞ `waitForPageLoad(page)` –≥–¥–µ —É–º–µ—Å—Ç–Ω–æ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `logPageInfo()` –≤ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Å—Ç–∞—Ö

#### 4. `data-management.spec.ts`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç: `waitForPageLoad`, `logPageInfo`, `checkToast`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `page.waitForLoadState('networkidle')` –Ω–∞ `waitForPageLoad(page)`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã `page.waitForTimeout()` –Ω–∞ `waitForPageLoad(page)`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ `checkToast()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

#### 5. `accessibility.spec.ts`
- ‚úÖ –£–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `waitForPageLoad` –∏ `logPageInfo`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –æ—Å—Ç–∞–≤—à–∏–µ—Å—è `page.waitForLoadState('networkidle')` –Ω–∞ `waitForPageLoad(page)`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `logPageInfo()` –≤–æ –≤—Å–µ —Ç–µ—Å—Ç—ã

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### 1. –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ
–í—Å–µ —Ç–µ—Å—Ç—ã —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

### 2. –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
Helper-—Ñ—É–Ω–∫—Ü–∏–∏ –≤–∫–ª—é—á–∞—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É edge cases:
- `waitForPageLoad()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ `networkidle`, –∏ `domcontentloaded`
- –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–±–æ–ª—å—à—É—é –ø–∞—É–∑—É –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–π
- `checkToast()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã —Å fallback

### 3. –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å
–ö–æ–¥ —Å—Ç–∞–ª –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω—ã–º:
```typescript
// –ë—ã–ª–æ:
await page.waitForLoadState('networkidle')
await page.waitForTimeout(2000)

// –°—Ç–∞–ª–æ:
await waitForPageLoad(page)
await logPageInfo(page)
```

### 4. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å
–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ª–æ–≥–∏–∫–µ –æ–∂–∏–¥–∞–Ω–∏–π —Ç–µ–ø–µ—Ä—å –¥–µ–ª–∞—é—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (`test-helpers.ts`), –∞ –Ω–µ –≤ –∫–∞–∂–¥–æ–º —Ç–µ—Å—Ç–µ.

### 5. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Å—Ç–∞—Ö, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –æ—Ç–ª–∞–¥–∫—É.

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

- **–£–ª—É—á—à–µ–Ω–æ —Ñ–∞–π–ª–æ–≤**: 5
- **–ó–∞–º–µ–Ω–µ–Ω–æ –≤—ã–∑–æ–≤–æ–≤**: ~50+
- **–î–æ–±–∞–≤–ª–µ–Ω–æ –∏–º–ø–æ—Ä—Ç–æ–≤**: 5
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—à–∏–±–æ–∫**: 1 (–¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –∏–º–ø–æ—Ä—Ç)

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ helper-—Ñ—É–Ω–∫—Ü–∏–∏

### `waitForPageLoad(page: Page)`
–û–∂–∏–¥–∞–µ—Ç –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `networkidle`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `domcontentloaded`
- –î–æ–±–∞–≤–ª—è–µ—Ç –ø–∞—É–∑—É –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–π

### `logPageInfo(page: Page)`
–õ–æ–≥–∏—Ä—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ:
- URL
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### `checkToast(page: Page, text: string | RegExp, type: 'success' | 'error' | 'info' | 'warning', timeout: number)`
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç boolean

### `waitForOperation(condition: () => Promise<boolean>, timeout: number, interval: number)`
–û–∂–∏–¥–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —É—Å–ª–æ–≤–∏—è:
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏–µ
- –ò–º–µ–µ—Ç —Ç–∞–π–º–∞—É—Ç
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```typescript
await page.goto('/quality')
await waitForPageLoad(page)
await logPageInfo(page)
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```typescript
const hasSuccess = await checkToast(page, /—É—Å–ø–µ—à–Ω–æ/i, 'success', 5000)
if (hasSuccess) {
  console.log('‚úÖ Toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è')
}
```

### –û–∂–∏–¥–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
```typescript
const completed = await waitForOperation(
  async () => {
    const status = await getNormalizationStatus(clientId, projectId)
    return status?.status === 'completed'
  },
  300000, // 5 –º–∏–Ω—É—Ç —Ç–∞–π–º–∞—É—Ç
  5000   // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
)
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- [ ] –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ helper-—Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –æ–±—â–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å helper-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–æ—Ä–º–∞–º–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å helper-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏
- [ ] –°–æ–∑–¥–∞—Ç—å helper-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ helper-—Ñ—É–Ω–∫—Ü–∏–∏** –≤–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ Playwright API
2. **–î–æ–±–∞–≤–ª—è–π—Ç–µ `logPageInfo()`** –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ `page.goto()` –¥–ª—è –ª—É—á—à–µ–π –æ—Ç–ª–∞–¥–∫–∏
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `checkToast()`** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `waitForPageLoad()`** –≤–º–µ—Å—Ç–æ `page.waitForLoadState('networkidle')`

