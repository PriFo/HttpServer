# Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

**–î–∞—Ç–∞:** 2025-11-26  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û –ö –°–ë–û–†–ö–ï**

---

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω Dockerfile –¥–ª—è Backend
- ‚úÖ –ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞ (builder + runtime)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `main_no_gui.go` —Å build tag `no_gui`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã wget –∏ curl –¥–ª—è healthcheck
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ –Ω–∞ –±–∞–∑–µ Alpine

### 2. –û–±–Ω–æ–≤–ª–µ–Ω docker-compose.yml
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω healthcheck (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç wget –∏–ª–∏ curl)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã volumes –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏

### 3. –û–±–Ω–æ–≤–ª–µ–Ω .dockerignore
- ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω—ã –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–∑ —Å–±–æ—Ä–∫–∏
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–±–æ—Ä–∫–∏

### 4. –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏
- ‚úÖ `docker-build.ps1` - PowerShell —Å–∫—Ä–∏–ø—Ç –¥–ª—è —É–¥–æ–±–Ω–æ–π —Å–±–æ—Ä–∫–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (build, run, stop, logs, clean)

### 5. –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `DOCKER_BUILD_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ Troubleshooting

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```powershell
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up --build -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: PowerShell —Å–∫—Ä–∏–ø—Ç

```powershell
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
.\docker-build.ps1 -Build -Run

# –¢–æ–ª—å–∫–æ –∑–∞–ø—É—Å–∫
.\docker-build.ps1 -Run

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
.\docker-build.ps1 -Logs

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
.\docker-build.ps1 -Stop
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –†—É—á–Ω–∞—è —Å–±–æ—Ä–∫–∞

```powershell
# Backend
docker build -t httpserver-backend .
docker run -d -p 9999:9999 -v ${PWD}/data:/app/data httpserver-backend

# Frontend
cd frontend
docker build -t httpserver-frontend .
docker run -d -p 3000:3000 -e BACKEND_URL=http://localhost:9999 httpserver-frontend
```

---

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
.
‚îú‚îÄ‚îÄ Dockerfile                 # Backend (Go)
‚îú‚îÄ‚îÄ docker-compose.yml         # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .dockerignore             # –ò—Å–∫–ª—é—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ docker-build.ps1          # –°–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ DOCKER_BUILD_GUIDE.md     # –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
‚îî‚îÄ‚îÄ frontend/
    ‚îî‚îÄ‚îÄ Dockerfile            # Frontend (Next.js)
```

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–æ—Ä—Ç—ã
- **Backend:** `9999`
- **Frontend:** `3000`

### Volumes
- `./data:/app/data` - –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `./1c_data.db:/app/1c_data.db:ro` - –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î (read-only)
- `./normalized_data.db:/app/normalized_data.db:ro` - –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ë–î (read-only)
- `./service.db:/app/service.db:ro` - —Å–µ—Ä–≤–∏—Å–Ω–∞—è –ë–î (read-only)

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `ARLIAI_API_KEY` - API –∫–ª—é—á –¥–ª—è AI –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `SERVER_PORT` - –ø–æ—Ä—Ç backend (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 9999)
- `BACKEND_URL` - URL backend –¥–ª—è frontend (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é http://backend:9999)

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏

```powershell
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker
docker --version
docker-compose --version

# –¢–µ—Å—Ç–æ–≤–∞—è —Å–±–æ—Ä–∫–∞
docker build -t httpserver-backend-test .
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞

```powershell
# –ó–∞–ø—É—Å–∫
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# –ü—Ä–æ–≤–µ—Ä–∫–∞ healthcheck
curl http://localhost:9999/health
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```powershell
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose logs

# –¢–æ–ª—å–∫–æ backend
docker-compose logs backend

# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏
docker-compose logs -f
```

---

## üìÑ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **DOCKER_BUILD_GUIDE.md** - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- **docker-compose.yml** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏
- **Dockerfile** - —Å–±–æ—Ä–∫–∞ backend
- **frontend/Dockerfile** - —Å–±–æ—Ä–∫–∞ frontend

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Docker:**
   ```powershell
   docker --version
   docker-compose --version
   ```

2. ‚úÖ **–°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é data:**
   ```powershell
   mkdir data
   ```

3. ‚úÖ **–°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:**
   ```powershell
   docker-compose up --build -d
   ```

4. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:**
   - Backend: http://localhost:9999/health
   - Frontend: http://localhost:3000

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** ‚úÖ

–í—Å–µ —Ñ–∞–π–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Å–±–æ—Ä–∫–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

