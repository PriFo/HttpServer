# –°—Ç–∞—Ç—É—Å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–µ–∫—Ç–∞

## –î–∞—Ç–∞: 2025-01-21

## ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. Upload Domain (Clean Architecture) ‚úÖ
- ‚úÖ Domain Layer (`internal/domain/upload/`)
- ‚úÖ Application Layer (`internal/application/upload/`)
- ‚úÖ Infrastructure Layer (`internal/infrastructure/persistence/`)
- ‚úÖ Presentation Layer (`internal/api/handlers/upload/`)
- ‚úÖ Routes (`internal/api/routes/upload_routes.go`)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Container (`internal/container/`)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ server.go
- ‚úÖ Endpoints –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `/api/v2`

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ ‚úÖ
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ –≤ `server.go` (—Ç–∏–ø—ã, API –∫–ª—é—á–∏)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ –≤ `container.go` –∏ `container_simple.go`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ –≤ `websearch/validator.go` (—Ç–∏–ø—ã –∏ –ø–æ–ª—è)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ –≤ `server/handlers/web_search.go` (–ø–æ–ª—è ValidationResult)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã

### 3. DI Container ‚úÖ
- ‚úÖ –°–æ–∑–¥–∞–Ω `Container` —Å –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ –°–æ–∑–¥–∞–Ω `SimpleContainer` –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Upload –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ú–µ—Ç–æ–¥—ã `initUploadComponents()` –∏ `GetUploadHandler()`

## üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ

### 1. Normalization Domain
- ‚úÖ Domain Layer (`internal/domain/normalization/`)
- ‚úÖ Application Layer (`internal/application/normalization/`)
- ‚è≥ Presentation Layer (—á–∞—Å—Ç–∏—á–Ω–æ)
- ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Container
- ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ server.go

### 2. Quality Domain
- ‚úÖ Domain Layer (`internal/domain/quality/`)
- ‚úÖ Application Layer (`internal/application/quality/`)
- ‚è≥ Presentation Layer (—á–∞—Å—Ç–∏—á–Ω–æ)
- ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Container
- ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ server.go

## ‚è≥ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è

### 1. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ–º–µ–Ω–æ–≤
- Normalization domain (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
- Quality domain (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
- Classification domain
- Counterparty domain

### 2. –£–ª—É—á—à–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- Unit —Ç–µ—Å—Ç—ã –¥–ª—è domain services
- Integration —Ç–µ—Å—Ç—ã –¥–ª—è handlers
- E2E —Ç–µ—Å—Ç—ã –¥–ª—è endpoints

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ websearch
- **–ü—Ä–æ–±–ª–µ–º–∞**: `websearch/router.go` –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `websearch/providers`, –∞ `websearch/providers/*.go` –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç `websearch`
- **–†–µ—à–µ–Ω–∏–µ**: –í—ã–Ω–µ—Å—Ç–∏ –æ–±—â–∏–µ —Ç–∏–ø—ã (`SearchResult`, `SearchItem`) –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç `websearch/types` –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–º–ø–æ—Ä—Ç–æ–≤
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ù–∏–∑–∫–∏–π (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)

### 2. –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∞–π–ª—ã –∏–º–µ—é—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã
- **–†–µ—à–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ `goimports` –∏–ª–∏ `gofmt`

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚úÖ `internal/container` - –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ `internal/api/handlers/upload` - –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ `internal/domain/upload` - –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ `internal/application/upload` - –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ `server` - –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è (—Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏ –æ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö)
- ‚ö†Ô∏è `websearch` - —Ü–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ Upload Domain - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ Clean Architecture
- ‚è≥ Normalization Domain - —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚è≥ Quality Domain - —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚è≥ Classification Domain - –Ω–µ –Ω–∞—á–∞—Ç
- ‚è≥ Counterparty Domain - –Ω–µ –Ω–∞—á–∞—Ç

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é Normalization Domain**
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ Container
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ server.go
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å endpoints

2. **–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é Quality Domain**
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ Container
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ server.go
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å endpoints

3. **–†–µ—à–∏—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ websearch**
   - –í—ã–Ω–µ—Å—Ç–∏ –æ–±—â–∏–µ —Ç–∏–ø—ã
   - –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–º–ø–æ—Ä—Ç–æ–≤

4. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã**
   - Unit —Ç–µ—Å—Ç—ã –¥–ª—è domain services
   - Integration —Ç–µ—Å—Ç—ã –¥–ª—è handlers

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –±–µ–∑ –ø–æ–ª–æ–º–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞
- –°—Ç–∞—Ä—ã–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- –ù–æ–≤—ã–µ endpoints –¥–æ—Å—Ç—É–ø–Ω—ã —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `/api/v2` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–ª–µ–¥—É—é—Ç enterprise best practices
