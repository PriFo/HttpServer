# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-11-23

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
3. [–ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](#–ø—Ä–∏–º–µ—Ä—ã-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
4. [–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](#–≤–∞–ª–∏–¥–∞—Ü–∏—è-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
5. [–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](#–ø—Ä–æ–≤–µ—Ä–∫–∞-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)

---

## –û–±–∑–æ—Ä

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –°–µ—Ä–≤–µ—Ä

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è |
|-----------|----------|--------------|--------------|
| `SERVER_PORT` | –ü–æ—Ä—Ç HTTP —Å–µ—Ä–≤–µ—Ä–∞ | `9999` | –ù–µ—Ç |

### –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è |
|-----------|----------|--------------|--------------|
| `DATABASE_PATH` | –ü—É—Ç—å –∫ –æ—Å–Ω–æ–≤–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö | `data.db` | –ù–µ—Ç |
| `NORMALIZED_DATABASE_PATH` | –ü—É—Ç—å –∫ –±–∞–∑–µ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö | `normalized_data.db` | –ù–µ—Ç |
| `SERVICE_DATABASE_PATH` | –ü—É—Ç—å –∫ —Å–µ—Ä–≤–∏—Å–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö | `service.db` | –ù–µ—Ç |
| `DB_MAX_OPEN_CONNS` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π | `25` | –ù–µ—Ç |
| `DB_MAX_IDLE_CONNS` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ idle –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π | `5` | –ù–µ—Ç |
| `DB_CONN_MAX_LIFETIME` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è | `5m` | –ù–µ—Ç |

### AI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è |
|-----------|----------|--------------|--------------|
| `ARLIAI_API_KEY` | API –∫–ª—é—á –¥–ª—è Arliai | - | –ù–µ—Ç* |
| `ARLIAI_MODEL` | –ú–æ–¥–µ–ª—å Arliai –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è | `GLM-4.5-Air` | –ù–µ—Ç |
| `OPENROUTER_API_KEY` | API –∫–ª—é—á –¥–ª—è OpenRouter | - | –ù–µ—Ç |
| `HUGGINGFACE_API_KEY` | API –∫–ª—é—á –¥–ª—è Hugging Face | - | –ù–µ—Ç |
| `EDENAI_API_KEY` | API –∫–ª—é—á –¥–ª—è Eden AI | - | –ù–µ—Ç |
| `AI_TIMEOUT` | –¢–∞–π–º–∞—É—Ç –¥–ª—è AI –∑–∞–ø—Ä–æ—Å–æ–≤ | `30s` | –ù–µ—Ç |

*–û–±—è–∑–∞—Ç–µ–ª–µ–Ω, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è AI —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ú—É–ª—å—Ç–∏-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è |
|-----------|----------|--------------|--------------|
| `MULTI_PROVIDER_ENABLED` | –í–∫–ª—é—á–∏—Ç—å –º—É–ª—å—Ç–∏-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–Ω—É—é –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é | `false` | –ù–µ—Ç |
| `AGGREGATION_STRATEGY` | –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ | `first_success` | –ù–µ—Ç |

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:**
- `first_success` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–≤—ã–π —É—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- `best_confidence` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –Ω–∞–∏–≤—ã—Å—à–µ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é
- `majority` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- `weighted_average` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∑–≤–µ—à–µ–Ω–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è |
|-----------|----------|--------------|--------------|
| `LOG_BUFFER_SIZE` | –†–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –¥–ª—è –ª–æ–≥–æ–≤ | `100` | –ù–µ—Ç |
| `LOG_LEVEL` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | `INFO` | –ù–µ—Ç |

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —É—Ä–æ–≤–Ω–∏:**
- `DEBUG` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `INFO` - –æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `WARN` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `ERROR` - –æ—à–∏–±–∫–∏

### –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è |
|-----------|----------|--------------|--------------|
| `NORMALIZER_EVENTS_BUFFER_SIZE` | –†–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –¥–ª—è —Å–æ–±—ã—Ç–∏–π –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ | `100` | –ù–µ—Ç |

### –û–±–æ–≥–∞—â–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è |
|-----------|----------|--------------|--------------|
| `ENRICHMENT_ENABLED` | –í–∫–ª—é—á–∏—Ç—å –æ–±–æ–≥–∞—â–µ–Ω–∏–µ | `true` | –ù–µ—Ç |
| `ENRICHMENT_AUTO_ENRICH` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–æ–≥–∞—â–µ–Ω–∏–µ | `true` | –ù–µ—Ç |
| `ENRICHMENT_MIN_QUALITY_SCORE` | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π score –∫–∞—á–µ—Å—Ç–≤–∞ –¥–ª—è –æ–±–æ–≥–∞—â–µ–Ω–∏—è | `0.3` | –ù–µ—Ç |
| `ENRICHMENT_CACHE_TTL` | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞ –æ–±–æ–≥–∞—â–µ–Ω–∏—è | `24h` | –ù–µ—Ç |
| `ENRICHMENT_CACHE_CLEANUP` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞ | `1h` | –ù–µ—Ç |

#### Dadata

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è |
|-----------|----------|--------------|--------------|
| `DADATA_ENABLED` | –í–∫–ª—é—á–∏—Ç—å Dadata | `true` | –ù–µ—Ç |
| `DADATA_API_KEY` | API –∫–ª—é—á Dadata | - | –ù–µ—Ç* |
| `DADATA_SECRET_KEY` | Secret –∫–ª—é—á Dadata | - | –ù–µ—Ç* |
| `DADATA_BASE_URL` | Base URL Dadata | `https://suggestions.dadata.ru` | –ù–µ—Ç |
| `DADATA_TIMEOUT` | –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ | `30s` | –ù–µ—Ç |
| `DADATA_MAX_REQUESTS` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ | `100` | –ù–µ—Ç |
| `DADATA_PRIORITY` | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–µ—Ä–≤–∏—Å–∞ | `1` | –ù–µ—Ç |

*–û–±—è–∑–∞—Ç–µ–ª–µ–Ω, –µ—Å–ª–∏ `DADATA_ENABLED=true`

#### Adata

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è |
|-----------|----------|--------------|--------------|
| `ADATA_ENABLED` | –í–∫–ª—é—á–∏—Ç—å Adata | `true` | –ù–µ—Ç |
| `ADATA_API_KEY` | API –∫–ª—é—á Adata | - | –ù–µ—Ç* |
| `ADATA_BASE_URL` | Base URL Adata | `https://adata.kz` | –ù–µ—Ç |
| `ADATA_TIMEOUT` | –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ | `30s` | –ù–µ—Ç |
| `ADATA_MAX_REQUESTS` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ | `50` | –ù–µ—Ç |
| `ADATA_PRIORITY` | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–µ—Ä–≤–∏—Å–∞ | `2` | –ù–µ—Ç |

*–û–±—è–∑–∞—Ç–µ–ª–µ–Ω, –µ—Å–ª–∏ `ADATA_ENABLED=true`

#### GISP

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è |
|-----------|----------|--------------|--------------|
| `GISP_ENABLED` | –í–∫–ª—é—á–∏—Ç—å GISP | `false` | –ù–µ—Ç |
| `GISP_API_KEY` | API –∫–ª—é—á GISP | - | –ù–µ—Ç* |
| `GISP_BASE_URL` | Base URL GISP | `https://gisp.gov.ru` | –ù–µ—Ç |
| `GISP_TIMEOUT` | –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ | `30s` | –ù–µ—Ç |
| `GISP_MAX_REQUESTS` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ | `50` | –ù–µ—Ç |
| `GISP_PRIORITY` | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–µ—Ä–≤–∏—Å–∞ | `3` | –ù–µ—Ç |

*–û–±—è–∑–∞—Ç–µ–ª–µ–Ω, –µ—Å–ª–∏ `GISP_ENABLED=true`

---

## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
# .env
SERVER_PORT=9999
DATABASE_PATH=data.db
```

### Production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
# .env.production
SERVER_PORT=9999
DATABASE_PATH=/app/data/data.db
NORMALIZED_DATABASE_PATH=/app/data/normalized_data.db
SERVICE_DATABASE_PATH=/app/data/service.db

# Database connection pooling
DB_MAX_OPEN_CONNS=50
DB_MAX_IDLE_CONNS=10
DB_CONN_MAX_LIFETIME=10m

# AI
ARLIAI_API_KEY=your_api_key_here
ARLIAI_MODEL=GLM-4.5-Air
AI_TIMEOUT=60s

# Multi-provider
MULTI_PROVIDER_ENABLED=true
AGGREGATION_STRATEGY=best_confidence

# Logging
LOG_LEVEL=INFO
LOG_BUFFER_SIZE=500

# Enrichment
ENRICHMENT_ENABLED=true
ENRICHMENT_AUTO_ENRICH=true
ENRICHMENT_MIN_QUALITY_SCORE=0.5

# Dadata
DADATA_ENABLED=true
DADATA_API_KEY=your_dadata_api_key
DADATA_SECRET_KEY=your_dadata_secret_key
DADATA_TIMEOUT=30s
DADATA_MAX_REQUESTS=200
DADATA_PRIORITY=1

# Adata
ADATA_ENABLED=true
ADATA_API_KEY=your_adata_api_key
ADATA_TIMEOUT=30s
ADATA_MAX_REQUESTS=100
ADATA_PRIORITY=2
```

### Development –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
# .env.development
SERVER_PORT=9999
DATABASE_PATH=./data/data.db
LOG_LEVEL=DEBUG
ENRICHMENT_ENABLED=false
MULTI_PROVIDER_ENABLED=false
```

### Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```yaml
# docker-compose.yml
services:
  backend:
    environment:
      - SERVER_PORT=9999
      - DATABASE_PATH=/app/data/data.db
      - ARLIAI_API_KEY=${ARLIAI_API_KEY}
      - DADATA_API_KEY=${DADATA_API_KEY}
      - DADATA_SECRET_KEY=${DADATA_SECRET_KEY}
```

---

## –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ. –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è:

1. **–ü–æ—Ä—Ç:** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 1-65535
2. **–ü—É—Ç–∏ –∫ –ë–î:** –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—É—Å—Ç—ã–º–∏
3. **Connection pooling:** 
   - MaxOpenConns >= 1
   - MaxIdleConns >= 1
   - MaxIdleConns <= MaxOpenConns
   - ConnMaxLifetime >= 1s
4. **–ë—É—Ñ–µ—Ä—ã:** —Ä–∞–∑–º–µ—Ä—ã >= 1
5. **AI —Ç–∞–π–º–∞—É—Ç:** >= 1s
6. **–°—Ç—Ä–∞—Ç–µ–≥–∏—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏:** –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–¥–Ω–æ–π –∏–∑ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö
7. **–û–±–æ–≥–∞—â–µ–Ω–∏–µ:**
   - MinQualityScore –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 0-1
   - –¢–∞–π–º–∞—É—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤ >= 1s
   - MaxRequests >= 1
   - Priority >= 1
   - Cache TTL >= 1m

### –ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

```bash
# –ù–µ–≤–µ—Ä–Ω—ã–π –ø–æ—Ä—Ç
SERVER_PORT=99999
# –û—à–∏–±–∫–∞: port must be between 1 and 65535, got 99999

# MaxIdleConns > MaxOpenConns
DB_MAX_OPEN_CONNS=10
DB_MAX_IDLE_CONNS=20
# –û—à–∏–±–∫–∞: max idle connections cannot be greater than max open connections

# –ù–µ–≤–µ—Ä–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
AGGREGATION_STRATEGY=invalid_strategy
# –û—à–∏–±–∫–∞: invalid aggregation strategy: invalid_strategy
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ß–µ—Ä–µ–∑ –∫–æ–¥

```go
import "httpserver/internal/config"

cfg, err := config.LoadConfig()
if err != nil {
    log.Fatalf("Failed to load config: %v", err)
}

// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–∞
```

### –ß–µ—Ä–µ–∑ —É—Ç–∏–ª–∏—Ç—É

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ —É—Ç–∏–ª–∏—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞)
go run cmd/config-check/main.go
```

### –ß–µ—Ä–µ–∑ API

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ endpoint —Å–æ–∑–¥–∞–Ω)
curl http://localhost:9999/api/config
```

---

## Best Practices

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–¥–µ**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã (HashiCorp Vault, AWS Secrets Manager)

2. **–ù–µ –ª–æ–≥–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã**
   - API –∫–ª—é—á–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–æ–ø–∞–¥–∞—Ç—å –≤ –ª–æ–≥–∏
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π**
   - `.env.development`
   - `.env.staging`
   - `.env.production`

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ connection pooling**
   - MaxOpenConns –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏
   - MaxIdleConns = MaxOpenConns / 5 (–ø—Ä–∏–º–µ—Ä–Ω–æ)

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã**
   - AI_TIMEOUT –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–æ–¥–µ–ª–∏
   - –¢–∞–π–º–∞—É—Ç—ã –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±—É—Ñ–µ—Ä—ã**
   - LOG_BUFFER_SIZE –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–±—ä–µ–º–∞ –ª–æ–≥–æ–≤
   - NORMALIZER_EVENTS_BUFFER_SIZE –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

1. **–õ–æ–≥–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
   - –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

2. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤**
   - Connection pool usage
   - Buffer usage

---

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–û—à–∏–±–∫–∞: "invalid config"**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –∑–Ω–∞—á–µ–Ω–∏–π (—á–∏—Å–ª–∞, durations)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–æ–∫

**–û—à–∏–±–∫–∞: "port is required"**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SERVER_PORT —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –ø—É—Å—Ç–æ–µ

**–û—à–∏–±–∫–∞: "database path is required"**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ DATABASE_PATH —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

### –ü—Ä–æ–±–ª–µ–º—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

**–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ connection pooling**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ MaxIdleConns <= MaxOpenConns
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è >= 1

**–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–∞–π–º–∞—É—Ç–æ–≤**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç duration (–Ω–∞–ø—Ä–∏–º–µ—Ä, "30s", "1m", "1h")
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è >= 1s

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2025-11-23*

