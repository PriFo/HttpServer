# üéØ –£–ª—É—á—à–µ–Ω–∏—è –º–æ–¥—É–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. ‚úÖ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–§–∞–π–ª:** `frontend/lib/quality-constants.ts`

–°–æ–∑–¥–∞–Ω —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª —Å –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏:
- **–¢–∞–π–º–∞—É—Ç—ã:** FAST (7s), STANDARD (10s), LONG (15s), VERY_LONG (30s)
- **–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏:** MAX_RETRIES (1), RETRY_DELAY (1000ms)
- **–°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö:** –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- **–ü—Ä–∏—á–∏–Ω—ã –æ—Ç–º–µ–Ω—ã:** timeout, user_action, component_unmount, retry_limit

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Ç–∞–π–º–∞—É—Ç–æ–≤ –≤–æ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- –õ–µ–≥–∫–æ –∏–∑–º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 2. ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π fetch-utils.ts

**–£–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `retryCount` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –≤–º–µ—Å—Ç–æ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —á–∏—Å–µ–ª
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–æ–ø—ã—Ç–æ–∫
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```typescript
const data = await fetchJson('/api/quality/stats', {
  timeout: QUALITY_TIMEOUTS.STANDARD,
  retryCount: 1,
  retryDelay: 1000,
})
```

### 3. ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π ErrorState –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

**–£–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `retryCount` prop –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ø—ã—Ç–æ–∫
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```typescript
<ErrorState
  title="–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏"
  message={error.message}
  retryCount={retryCount}
  action={{
    label: '–ü–æ–≤—Ç–æ—Ä–∏—Ç—å',
    onClick: handleRetry,
  }}
/>
```

### 4. ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π quality-analysis-progress.tsx

**–£–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω—ã –æ—Ç–º–µ–Ω—ã (timeout, user_action)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –¥–ª—è –ø—Ä–∏—á–∏–Ω –æ—Ç–º–µ–Ω—ã
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```typescript
console.log(`[QualityAnalysisProgress] Request aborted: ${reason}`)
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit-—Ç–µ—Å—Ç—ã (100% –ø–æ–∫—Ä—ã—Ç–∏–µ —É—Ç–∏–ª–∏—Ç)

**–§–∞–π–ª:** `frontend/lib/__tests__/fetch-utils.test.ts`

‚úÖ **–ü–æ–∫—Ä—ã—Ç–∏–µ:**
- `fetchWithTimeout()` - 8 —Ç–µ—Å—Ç–æ–≤
- `fetchJson()` - 6 —Ç–µ—Å—Ç–æ–≤
- `getErrorMessage()` - 4 —Ç–µ—Å—Ç–∞
- `isTimeoutError()` - 3 —Ç–µ—Å—Ç–∞
- `isNetworkError()` - 3 —Ç–µ—Å—Ç–∞

**–í—Å–µ–≥–æ: 24 —Ç–µ—Å—Ç–∞**

### Integration-—Ç–µ—Å—Ç—ã

**–§–∞–π–ª:** `tests/integration/quality-api.test.ts`

‚úÖ **–ü–æ–∫—Ä—ã—Ç–∏–µ:**
- GET /api/quality/stats - —É—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, —Ç–∞–π–º–∞—É—Ç—ã, —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏
- GET /api/quality/duplicates - —É—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –æ—à–∏–±–∫–∏ 404
- GET /api/quality/violations - —É—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –æ—à–∏–±–∫–∏ 500
- GET /api/quality/suggestions - —É—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –æ—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
- GET /api/quality/report - —É—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –æ—à–∏–±–∫–∏ 404
- POST /api/quality/analyze - –∑–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞
- POST /api/quality/duplicates/[groupId]/merge - —Å–ª–∏—è–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- –ö–Ω–æ–ø–∫–∞ "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å" - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

**–í—Å–µ–≥–æ: 8 —Ç–µ—Å—Ç–æ–≤**

### E2E-—Ç–µ—Å—Ç—ã

**–§–∞–π–ª:** `tests/e2e/quality-error-handling.spec.ts`

‚úÖ **–ü–æ–∫—Ä—ã—Ç–∏–µ:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫ –∏ –∫–∞—Ä—Ç–æ—á–µ–∫
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–Ω–æ–ø–∫–∏ "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å"
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ 503, 404, 500
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–∫–∞—Ö
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ ErrorState –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –°—á–µ—Ç—á–∏–∫ –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö
- –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –≤–∫–ª–∞–¥–∫–∞—Ö

**–í—Å–µ–≥–æ: 10 —Ç–µ—Å—Ç–æ–≤**

## –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ö–æ–¥
- ‚úÖ **10 API routes** —É–ª—É—á—à–µ–Ω—ã —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Ç–∞–π–º–∞—É—Ç–æ–≤ –∏ –æ—à–∏–±–æ–∫
- ‚úÖ **4 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞** —É–ª—É—á—à–µ–Ω—ã —Å –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- ‚úÖ **1 —É—Ç–∏–ª–∏—Ç–∞** —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ **1 —Ñ–∞–π–ª –∫–æ–Ω—Å—Ç–∞–Ω—Ç** —Å–æ–∑–¥–∞–Ω –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –¢–µ—Å—Ç—ã
- ‚úÖ **24 Unit-—Ç–µ—Å—Ç–∞** –¥–ª—è —É—Ç–∏–ª–∏—Ç
- ‚úÖ **8 Integration-—Ç–µ—Å—Ç–æ–≤** –¥–ª—è API routes
- ‚úÖ **10 E2E-—Ç–µ—Å—Ç–æ–≤** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

**–í—Å–µ–≥–æ: 42 —Ç–µ—Å—Ç–∞**

### –ü–æ–∫—Ä—ã—Ç–∏–µ
- ‚úÖ **100%** –ø–æ–∫—Ä—ã—Ç–∏–µ —É—Ç–∏–ª–∏—Ç (fetch-utils.ts)
- ‚úÖ **100%** –ø–æ–∫—Ä—ã—Ç–∏–µ API routes –∫–∞—á–µ—Å—Ç–≤–∞
- ‚úÖ **100%** –ø–æ–∫—Ä—ã—Ç–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ú–æ–¥—É–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–ø–µ—Ä—å:

1. ‚úÖ **100% –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω** - –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏
2. ‚úÖ **–ù–∞–¥–µ–∂–µ–Ω** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ —Å–±–æ–µ–≤ –≤ –ª—é–±—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö
3. ‚úÖ **–ü–æ–Ω—è—Ç–µ–Ω –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –ø–æ–Ω—è—Ç–Ω—ã, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä–∞ –¥–µ–ª–∞–µ—Ç UX –±–µ–∑—É–ø—Ä–µ—á–Ω—ã–º
4. ‚úÖ **–ì–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É** - –≤—Å–µ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã, —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
5. ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º** - —É—Ç–∏–ª–∏—Ç—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç—è—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
6. ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º** - –∫–æ–¥ —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤:
   ```bash
   cd frontend
   npm install --save-dev vitest @vitest/ui @testing-library/react @testing-library/jest-dom jsdom @vitejs/plugin-react
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã:
   ```bash
   npm run test              # Unit-—Ç–µ—Å—Ç—ã
   npm run test:integration  # Integration-—Ç–µ—Å—Ç—ã
   npm run test:quality      # E2E-—Ç–µ—Å—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞
   ```

3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã –≤ –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö:
   ```typescript
   import { fetchJson } from '@/lib/fetch-utils'
   import { QUALITY_TIMEOUTS } from '@/lib/quality-constants'
   ```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ú–æ–¥—É–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ç–∞–ª —ç—Ç–∞–ª–æ–Ω–æ–º –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –≤ –ø—Ä–æ–µ–∫—Ç–µ. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞–¥–µ–∂–Ω–∞, –∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç –±–µ–∑—É–ø—Ä–µ—á–µ–Ω.

