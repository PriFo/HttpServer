# Руководство по использованию системы генерации плана исправления ошибок

## Быстрый старт

### Вариант 1: Полностью автоматический (рекомендуется)

```powershell
.\build-and-fix.ps1
```

Этот скрипт:
1. Автоматически соберет проект (`go build ./...`)
2. Сохранит ошибки в `build_errors_full.log`
3. Сгенерирует план исправления ошибок
4. Создаст промпты для каждого файла

Если проект собирается без ошибок - скрипт завершится с сообщением об успехе.

### Вариант 2: Использование существующего файла ошибок

Если у вас уже есть файл с ошибками:

```powershell
.\build-and-fix.ps1 -SkipBuild
```

Или только генерация плана:

```powershell
.\generate-build-fix-plan.ps1
```

### Вариант 3: Через универсальный промпт (для AI)

1. Откройте `build_fix_prompt_short.txt`
2. Скопируйте весь текст
3. Вставьте в новый чат с AI
4. AI автоматически выполнит все шаги

## Структура файлов

```
.
├── build-and-fix.ps1              # Полностью автоматический скрипт
├── generate-build-fix-plan.ps1     # Генерация плана (обертка)
├── generate_build_fix_plan.py      # Python скрипт парсинга
├── parse-go-errors.ps1             # PowerShell fallback парсер
├── build_fix_prompt_short.txt      # Универсальный промпт для AI
├── BUILD_FIX_PROMPT.md             # Подробная документация промпта
├── BUILD_FIX_README.md             # Общая документация
└── BUILD_FIX_USAGE.md              # Это руководство
```

## Результаты работы

После выполнения скриптов создаются:

- **build_errors_full.log** - все ошибки компиляции
- **build_fix_plan.md** - полный план с промптами для каждого файла
- **build_fix_prompts/** - отдельные промпты:
  - `step_01_*.txt`
  - `step_02_*.txt`
  - и т.д.

## Особенности

### ✅ Автоматическое определение Python

Скрипт автоматически ищет Python в системе:
- `python`
- `python3`
- `py`
- `python.exe`
- `python3.exe`

### ✅ Fallback на PowerShell

Если Python не найден, используется встроенный PowerShell парсер (`parse-go-errors.ps1`).

### ✅ Параллельное выполнение

Каждый шаг в плане исправляет отдельный файл, поэтому шаги можно выполнять параллельно.

### ✅ Детальные объяснения

Каждый промпт содержит:
- Точные ошибки компилятора с номерами строк
- Объяснение типов ошибок и их тонкости
- Важные примечания о зависимых файлах
- Инструкции по проверке компиляции

## Примеры использования

### Пример 1: Полная автоматизация

```powershell
# Собрать проект и создать план
.\build-and-fix.ps1
```

### Пример 2: Только генерация плана

```powershell
# Если уже есть build_errors_full.log
.\generate-build-fix-plan.ps1
```

### Пример 3: Ручная сборка + автоматический план

```powershell
# Собрать проект вручную
go build ./... 2>&1 | Tee-Object -FilePath build_errors_full.log

# Сгенерировать план
.\generate-build-fix-plan.ps1
```

### Пример 4: Использование через AI

1. Скопируйте промпт из `build_fix_prompt_short.txt`
2. Вставьте в новый чат
3. AI выполнит все автоматически

## Требования

- **Go компилятор** - для сборки проекта
- **PowerShell 5.1+** - для выполнения скриптов
- **Python 3** (опционально) - для более точного парсинга ошибок

## Устранение неполадок

### Python не найден

Скрипт автоматически использует PowerShell fallback. Это нормально, функциональность не теряется.

### Ошибка "Файл не найден"

Убедитесь, что вы находитесь в корневой директории проекта (где находится `go.mod`).

### Ошибка выполнения скрипта

Проверьте политику выполнения PowerShell:
```powershell
Get-ExecutionPolicy
```

Если нужно изменить:
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

## Дополнительная информация

- `BUILD_FIX_PROMPT.md` - подробная документация промпта
- `BUILD_FIX_README.md` - общая информация о системе
- `generate_build_fix_plan.py` - исходный код Python скрипта

