# ะััะตั ะพ ะฟัะพะฒะตัะบะต ัะตะฟะพัะบะธ ะฒัะทะพะฒะพะฒ API

## ะะฐัะฐ ะฟัะพะฒะตัะบะธ
$(Get-Date -Format "yyyy-MM-dd HH:mm:ss")

## ะะตะทัะปััะฐัั ะฟัะพะฒะตัะบะธ

### โ ะัะฝะพะฒะฝัะต ัะตะฟะพัะบะธ ัะฐะฑะพัะฐัั ะบะพััะตะบัะฝะพ

#### 1. ะะพะฝััะฐะณะตะฝัั
- **GET /api/counterparties/normalized** โ
  - ะคัะพะฝัะตะฝะด โ Next.js API โ ะัะบะตะฝะด โ ะะ
  - ะัะต ะทะฒะตะฝัั ัะตะฟะพัะบะธ ะฟัะพะฒะตัะตะฝั ะธ ัะฐะฑะพัะฐัั
  
- **GET /api/counterparties/normalized/stats** โ
  - ะคัะพะฝัะตะฝะด โ Next.js API โ ะัะบะตะฝะด โ ะะ
  - ะกัะฐัะธััะธะบะฐ ะบะพััะตะบัะฝะพ ะฟะตัะตะดะฐะตััั
  
- **GET /api/counterparties/normalized/{id}** โ
  - ะคัะพะฝัะตะฝะด โ Next.js API โ ะัะบะตะฝะด โ ะะ
  - ะะพะปััะตะฝะธะต ะบะพะฝััะฐะณะตะฝัะฐ ะฟะพ ID ัะฐะฑะพัะฐะตั
  
- **PUT /api/counterparties/normalized/{id}** โ
  - ะคัะพะฝัะตะฝะด โ Next.js API โ ะัะบะตะฝะด โ ะะ
  - ะะฑะฝะพะฒะปะตะฝะธะต ะบะพะฝััะฐะณะตะฝัะฐ ัะฐะฑะพัะฐะตั

#### 2. ะะพัะผะฐะปะธะทะฐัะธั
- **POST /api/clients/{id}/projects/{projectId}/normalization/start** โ
  - ะคัะพะฝัะตะฝะด โ Next.js API โ ะัะบะตะฝะด โ ะะพัะผะฐะปะธะทะฐัะพั
  - **ะัะฟัะฐะฒะปะตะฝะพ:** ะะพะฑะฐะฒะปะตะฝะฐ ะฟะตัะตะดะฐัะฐ body ะทะฐะฟัะพัะฐ
  
- **GET /api/normalization/stats** โ
  - ะคัะพะฝัะตะฝะด โ Next.js API โ ะัะบะตะฝะด โ ะะ
  - ะกัะฐัะธััะธะบะฐ ะฝะพัะผะฐะปะธะทะฐัะธะธ ัะฐะฑะพัะฐะตั

#### 3. ะะปะธะตะฝัั ะธ ะฟัะพะตะบัั
- **GET /api/clients** โ
  - ะคัะพะฝัะตะฝะด โ Next.js API โ ะัะบะตะฝะด โ ะะ
  
- **GET /api/clients/{id}/projects** โ
  - ะคัะพะฝัะตะฝะด โ Next.js API โ ะัะบะตะฝะด โ ะะ

### ๐ง ะัะฟัะฐะฒะปะตะฝะฝัะต ะฟัะพะฑะปะตะผั

1. **ะะตัะตะดะฐัะฐ body ะฒ normalization/start**
   - **ะคะฐะนะป:** `frontend/app/api/clients/[clientId]/projects/[projectId]/normalization/start/route.ts`
   - **ะัะพะฑะปะตะผะฐ:** Body ะทะฐะฟัะพัะฐ ะฝะต ะฟะตัะตะดะฐะฒะฐะปัั ะฒ ะฑัะบะตะฝะด
   - **ะะตัะตะฝะธะต:** ะะพะฑะฐะฒะปะตะฝะฐ ะฟะตัะตะดะฐัะฐ body ัะตัะตะท `await request.json()`

### โ๏ธ Endpoints ะฑะตะท ััะพะฝัะตะฝะด API routes

ะกะปะตะดัััะธะต endpoints ัััะตััะฒััั ะฝะฐ ะฑัะบะตะฝะดะต, ะฝะพ ะฝะต ะธะผะตัั ััะพะฝัะตะฝะด API routes:

1. **POST /api/counterparties/normalized/enrich**
   - ะััะฝะพะต ะพะฑะพะณะฐัะตะฝะธะต ะบะพะฝััะฐะณะตะฝัะฐ
   - ะะตะบะพะผะตะฝะดัะตััั ัะพะทะดะฐัั: `frontend/app/api/counterparties/normalized/enrich/route.ts`

2. **GET /api/counterparties/normalized/duplicates**
   - ะะพะปััะตะฝะธะต ะณััะฟะฟ ะดัะฑะปะธะบะฐัะพะฒ
   - ะะตะบะพะผะตะฝะดัะตััั ัะพะทะดะฐัั: `frontend/app/api/counterparties/normalized/duplicates/route.ts`

3. **POST /api/counterparties/normalized/duplicates/{groupId}/merge**
   - ะะฑัะตะดะธะฝะตะฝะธะต ะดัะฑะปะธะบะฐัะพะฒ
   - ะะตะบะพะผะตะฝะดัะตััั ัะพะทะดะฐัั: `frontend/app/api/counterparties/normalized/duplicates/[groupId]/merge/route.ts`

4. **POST /api/counterparties/normalized/export**
   - ะญะบัะฟะพัั ะบะพะฝััะฐะณะตะฝัะพะฒ
   - ะะตะบะพะผะตะฝะดัะตััั ัะพะทะดะฐัั: `frontend/app/api/counterparties/normalized/export/route.ts`

### ๐ ะกัะฐัะธััะธะบะฐ ะฟัะพะฒะตัะบะธ

- **ะัะตะณะพ endpoints ะฟัะพะฒะตัะตะฝะพ:** 8
- **ะะฐะฑะพัะฐัั ะบะพััะตะบัะฝะพ:** 8
- **ะขัะตะฑััั ัะพะทะดะฐะฝะธั ััะพะฝัะตะฝะด routes:** 4
- **ะัะฟัะฐะฒะปะตะฝะพ ะฟัะพะฑะปะตะผ:** 1

### ๐ ะกัััะบัััะฐ ัะตะฟะพัะบะธ ะฒัะทะพะฒะพะฒ

```
โโโโโโโโโโโโโโโ
โ  ะคัะพะฝัะตะฝะด   โ (React ะบะพะผะฟะพะฝะตะฝั)
โ  ะะพะผะฟะพะฝะตะฝั  โ
โโโโโโโโฌโโโโโโโ
       โ fetch('/api/...')
       โผ
โโโโโโโโโโโโโโโ
โ  Next.js    โ (API Route)
โ  API Route  โ
โโโโโโโโฌโโโโโโโ
       โ fetch(BACKEND_URL + '/api/...')
       โผ
โโโโโโโโโโโโโโโ
โ   ะัะบะตะฝะด    โ (Go Server)
โ  Handler    โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ   ะะฐะทะฐ      โ (SQLite)
โ  ะะฐะฝะฝัั     โ
โโโโโโโโโโโโโโโ
```

### โ ะัะฒะพะดั

1. **ะัะฝะพะฒะฝัะต ัะตะฟะพัะบะธ ะฒัะทะพะฒะพะฒ ัะฐะฑะพัะฐัั ะบะพััะตะบัะฝะพ**
2. **ะัะต ะบัะธัะธัะฝัะต endpoints ะธะผะตัั ััะพะฝัะตะฝะด API routes**
3. **ะัะฟัะฐะฒะปะตะฝะฐ ะฟัะพะฑะปะตะผะฐ ั ะฟะตัะตะดะฐัะตะน body ะฒ normalization/start**
4. **ะะตะบะพะผะตะฝะดัะตััั ัะพะทะดะฐัั ััะพะฝัะตะฝะด API routes ะดะปั ะดะพะฟะพะปะฝะธัะตะปัะฝัั endpoints ะบะพะฝััะฐะณะตะฝัะพะฒ**

### ๐ ะะตะบะพะผะตะฝะดะฐัะธะธ

1. ะกะพะทะดะฐัั ััะพะฝัะตะฝะด API routes ะดะปั ะพะฑะพะณะฐัะตะฝะธั, ะดัะฑะปะธะบะฐัะพะฒ ะธ ัะบัะฟะพััะฐ ะบะพะฝััะฐะณะตะฝัะพะฒ
2. ะะพะฑะฐะฒะธัั ะพะฑัะฐะฑะพัะบั ะพัะธะฑะพะบ ะฒะพ ะฒัะต API routes
3. ะะพะฑะฐะฒะธัั ะปะพะณะธัะพะฒะฐะฝะธะต ะดะปั ะพัะปะฐะดะบะธ ัะตะฟะพัะบะธ ะฒัะทะพะฒะพะฒ
4. ะัะพะฒะตัะธัั ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (BACKEND_URL)
5. ะะตะณัะปััะฝะพ ัะตััะธัะพะฒะฐัั ัะตะฟะพัะบั ะฒัะทะพะฒะพะฒ ั ะฟะพะผะพััั `test_api_chain.ps1`

