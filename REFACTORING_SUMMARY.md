# üìã –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ

**–î–∞—Ç–∞:** 2025-11-21  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í –ø—Ä–æ—Ü–µ—Å—Å–µ

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –°–æ–∑–¥–∞–Ω–∞ –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ handlers

#### –ù–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –∏ —Ñ–∞–π–ª—ã:
- ‚úÖ `server/handlers/response.go` - –æ–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è JSON –æ—Ç–≤–µ—Ç–æ–≤
  - `WriteJSONResponse` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ JSON –æ—Ç–≤–µ—Ç—ã
  - `WriteJSONError` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏
  - `WriteJSONSuccess` - —É—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
  - `WriteJSONPaginatedResponse` - –ø–∞–≥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

- ‚úÖ `server/handlers/validation.go` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  - `ValidateIntParam` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  - `ValidateIntPathParam` - –≤–∞–ª–∏–¥–∞—Ü–∏—è ID –∏–∑ path
  - `ValidateStringParam` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  - `ValidateSearchQuery` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
  - `ValidatePaginationParams` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

- ‚úÖ `server/handlers/utils.go` - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏
  - `FileValidator` - –≤–∞–ª–∏–¥–∞—Ç–æ—Ä —Ñ–∞–π–ª–æ–≤
  - `SanitizeFilename` - –æ—á–∏—Å—Ç–∫–∞ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
  - `ValidatePathTraversal` - –∑–∞—â–∏—Ç–∞ –æ—Ç path traversal
  - `ValidateSQLiteFile` - –≤–∞–ª–∏–¥–∞—Ü–∏—è SQLite —Ñ–∞–π–ª–æ–≤
  - `IsValidTableName` - –∑–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π
  - `BuildSafeTableQuery` - –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã

- ‚úÖ `server/handlers/routes.go` - —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤
  - `RouteGroup` - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤
  - `RouteRegistry` - —Ä–µ–µ—Å—Ç—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ middleware –Ω–∞ —É—Ä–æ–≤–Ω–µ –≥—Ä—É–ø–ø –∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤

- ‚úÖ `server/handlers/base.go` - –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
  - `BaseHandler` - –æ–±—â–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
  - `HandleMethodNotAllowed` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤

- ‚úÖ `server/handlers/upload.go` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
  - `FileUploadHandler` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
  - `UploadResult` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–≥—Ä—É–∑–∫–∏

- ‚úÖ `server/handlers/upload_handlers.go` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏
  - `UploadHandler` - –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
  - `ValidateUploadRequest` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞
  - `ProcessFileUpload` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏

- ‚úÖ `server/handlers/file_validation.go` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
  - `SQLiteValidator` - –≤–∞–ª–∏–¥–∞—Ç–æ—Ä SQLite —Ñ–∞–π–ª–æ–≤
  - `ValidateFileHeader` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞
  - `ValidateFileIntegrity` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
  - `SaveFile` - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

- ‚úÖ `server/server_groups.go` - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ–ª–µ–π Server
  - `DatabaseGroup` - –ø–æ–ª—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
  - `NormalizationGroup` - –ø–æ–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
  - `ClassificationGroup` - –ø–æ–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
  - `QualityGroup` - –ø–æ–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö
  - `AIClientsGroup` - –ø–æ–ª—è AI –∫–ª–∏–µ–Ω—Ç–æ–≤

---

## üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ

### 1. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ server.go
- ‚è≥ –†–∞–∑–±–∏—Ç—å –±–æ–ª—å—à–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (handleUploadProjectDatabase - 400+ —Å—Ç—Ä–æ–∫)
- ‚è≥ –í—ã–Ω–µ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚è≥ –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

### 2. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- ‚è≥ –°–æ–∑–¥–∞—Ç—å handlers/database_handlers.go
- ‚è≥ –°–æ–∑–¥–∞—Ç—å handlers/client_handlers.go
- ‚è≥ –°–æ–∑–¥–∞—Ç—å handlers/quality_handlers.go

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- **server.go:** 15882 —Å—Ç—Ä–æ–∫–∏
- **–§—É–Ω–∫—Ü–∏–π:** 197
- **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:** 148

### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (—á–∞—Å—Ç–∏—á–Ω–æ):
- **server.go:** ~15882 —Å—Ç—Ä–æ–∫–∏ (–ø–æ–∫–∞ –Ω–µ –∏–∑–º–µ–Ω–µ–Ω)
- **handlers/:** 8 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- **–£–ª—É—á—à–µ–Ω–∞ –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å:** ‚úÖ

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é** - —Ä–µ—à–∏—Ç—å, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏ handlers/validation.go –∏–ª–∏ server/validation.go
2. **–í—ã–Ω–µ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏** - —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –≥—Ä—É–ø–ø –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–æ–ª—å—à–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏** - —Ä–∞–∑–±–∏—Ç—å handleUploadProjectDatabase
4. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ServerGroups –≤ Server struct
5. **–û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã** - —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

---

## üí° –£–ª—É—á—à–µ–Ω–∏—è

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç path traversal
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è SQLite —Ñ–∞–π–ª–æ–≤

### –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å:
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å –æ–±—â–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å:
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ –õ–µ–≥—á–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏

