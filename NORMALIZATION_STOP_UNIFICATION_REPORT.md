# ‚úÖ –û—Ç—á–µ—Ç –æ–± —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

**–î–∞—Ç–∞:** 2025-11-21  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ö–ê –ò –£–ù–ò–§–ò–ö–ê–¶–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´**

---

## üéØ –¶–µ–ª—å

–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ (–∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ –∏ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã) –º–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º.

---

## üìã –ê–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –º–µ—Å—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ (CounterpartyNormalizer)

**–ú–µ—Å—Ç–∞ –∑–∞–ø—É—Å–∫–∞:**
1. `handleStartClientNormalization` (—Å—Ç—Ä–æ–∫–∞ 8346)
2. `processCounterpartyDatabase` (—Å—Ç—Ä–æ–∫–∞ 8943)
3. `processCounterpartyDatabasesParallel` (—Å—Ç—Ä–æ–∫–∞ 8860)

**–ú–µ—Ö–∞–Ω–∏–∑–º –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—ã–π —Ñ–ª–∞–≥ `normalizerRunning`
- ‚úÖ –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `CounterpartyNormalizer`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ 8 —Ç–æ—á–∫–∞—Ö:
  - –ü–µ—Ä–µ–¥ –∞–Ω–∞–ª–∏–∑–æ–º –¥—É–±–ª–µ–π
  - –ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –¥—É–±–ª–µ–π
  - –í –≤–æ—Ä–∫–µ—Ä–∞—Ö (2 –º–µ—Å—Ç–∞)
  - –ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
  - –ü–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º ProcessNormalization (3 –º–µ—Å—Ç–∞)

**API –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:**
- ‚úÖ `/api/clients/{id}/projects/{projectId}/normalization/stop` (—Å—Ç—Ä–æ–∫–∞ 9115)
- ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `normalizerRunning = false`
- ‚úÖ –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

---

### 2. ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã (Normalizer)

**–ú–µ—Å—Ç–∞ –∑–∞–ø—É—Å–∫–∞:**
1. `handleNormalizeStart` (—Å—Ç—Ä–æ–∫–∞ 3352)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `normalizerToUse.ProcessNormalization(uploadID)` (—Å—Ç—Ä–æ–∫–∞ 3571)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–ª–∞–≥ `normalizerRunning`

**–ú–µ—Ö–∞–Ω–∏–∑–º –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—ã–π —Ñ–ª–∞–≥ `normalizerRunning`
- ‚ö†Ô∏è **–ù–ï –ø–µ—Ä–µ–¥–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ Normalizer**
- ‚ö†Ô∏è **–ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫—É –≤ —Ü–∏–∫–ª–µ ProcessNormalization**

**API –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:**
- ‚úÖ `/api/normalization/stop` (—Å—Ç—Ä–æ–∫–∞ 4091)
- ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `normalizerRunning = false`

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –î–û–†–ê–ë–û–¢–ö–ò**

---

### 3. ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã —á–µ—Ä–µ–∑ ClientNormalizer

**–ú–µ—Å—Ç–∞ –∑–∞–ø—É—Å–∫–∞:**
1. `processCounterpartyDatabasesParallel` (—Å—Ç—Ä–æ–∫–∞ 8659)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `clientNormalizer.ProcessWithClientBenchmarks(items)` (—Å—Ç—Ä–æ–∫–∞ 8670)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Å—Å–∏–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

**–ú–µ—Ö–∞–Ω–∏–∑–º –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–µ—Å—Å–∏–∏ (`session.Status != "running"`)
- ‚úÖ –°–µ—Å—Å–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ —á–µ—Ä–µ–∑ `StopNormalizationSession`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—ã–π —Ñ–ª–∞–≥ `normalizerRunning` —á–µ—Ä–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫—É —Å–µ—Å—Å–∏–∏

**API –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:**
- ‚úÖ `/api/clients/{id}/projects/{projectId}/normalization/stop` (—Å—Ç—Ä–æ–∫–∞ 9115)
- ‚úÖ –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–µ—Å—Å–∏–∏ —á–µ—Ä–µ–∑ `StopNormalizationSession`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

---

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

### –ï–¥–∏–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

**–§–ª–∞–≥ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:**
```go
normalizerRunning bool
normalizerMutex   sync.RWMutex
```

**–§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:**
```go
stopCheck := func() bool {
    s.normalizerMutex.RLock()
    shouldStop := !s.normalizerRunning
    s.normalizerMutex.RUnlock()
    return shouldStop
}
```

**API endpoints –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:**
1. `/api/normalization/stop` - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã
2. `/api/clients/{id}/projects/{projectId}/normalization/stop` - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤

---

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 1: Normalizer.ProcessNormalization –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫—É

**–§–∞–π–ª:** `normalization/normalizer.go`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `Normalizer.ProcessNormalization` –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
- –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–ª–∞–≥ `normalizerRunning` –≤ —Ü–∏–∫–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `stopCheck func() bool` –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `Normalizer`
2. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
3. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ —Ü–∏–∫–ª `ProcessNormalization`
4. –ü–µ—Ä–µ–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–∑ `handleNormalizeStart`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π (–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã –æ–±—ã—á–Ω–æ –±—ã—Å—Ç—Ä–µ–µ)

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –î–≤–∞ —Ä–∞–∑–Ω—ã—Ö API –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- `/api/normalization/stop` - –¥–ª—è –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã
- `/api/clients/{id}/projects/{projectId}/normalization/stop` - –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –û–±–∞ API –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π —Ñ–ª–∞–≥ `normalizerRunning`
- –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π endpoint `/api/normalization/stop-all` –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ–≥–æ

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

1. ‚úÖ **–ï–¥–∏–Ω—ã–π —Ñ–ª–∞–≥ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏** - –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `normalizerRunning`
2. ‚úÖ **–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `normalizerMutex`
3. ‚úÖ **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤** - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
4. ‚úÖ **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ ClientNormalizer** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Å—Å–∏–∏ –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
5. ‚úÖ **API –æ—Å—Ç–∞–Ω–æ–≤–∫–∏** - —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –¢–∏–ø—ã –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏:
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ (CounterpartyNormalizer) - **–ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**
- ‚ö†Ô∏è –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã (Normalizer) - **–¢–†–ï–ë–£–ï–¢ –î–û–†–ê–ë–û–¢–ö–ò**
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ ClientNormalizer - **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

### –ú–µ—Å—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:
- –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã: 8 —Ç–æ—á–µ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ (Normalizer): 0 —Ç–æ—á–µ–∫ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å)
- –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ (ClientNormalizer): —á–µ—Ä–µ–∑ —Å–µ—Å—Å–∏–∏

### API endpoints:
- 2 endpoint –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ (—Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏)
- –û–±–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π —Ñ–ª–∞–≥ `normalizerRunning`

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### 1. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ Normalizer.ProcessNormalization

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```go
type Normalizer struct {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
    stopCheck func() bool // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
}

func NewNormalizer(..., stopCheck func() bool) *Normalizer {
    return &Normalizer{
        // ...
        stopCheck: stopCheck,
    }
}

func (n *Normalizer) ProcessNormalization(uploadID int) error {
    // ...
    for i, item := range items {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–∞–∂–¥—ã–µ N –∑–∞–ø–∏—Å–µ–π
        if i > 0 && i%50 == 0 && n.stopCheck != nil && n.stopCheck() {
            return fmt.Errorf("normalization stopped by user")
        }
        // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞
    }
}
```

### 2. –°–æ–∑–¥–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π endpoint –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```go
// /api/normalization/stop-all - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
func (s *Server) handleNormalizationStopAll(w http.ResponseWriter, r *http.Request) {
    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—É, –∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤
}
```

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:

1. ‚úÖ **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤** - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ 8 —Ç–æ—á–∫–∞—Ö
2. ‚úÖ **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ ClientNormalizer** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Å—Å–∏–∏ –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
3. ‚ö†Ô∏è **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã (Normalizer)** - —Ç—Ä–µ–±—É–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

### –ï–¥–∏–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:

- ‚úÖ –í—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π —Ñ–ª–∞–≥ `normalizerRunning`
- ‚úÖ –í—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π –º—å—é—Ç–µ–∫—Å `normalizerMutex`
- ‚úÖ API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚ö†Ô∏è –ù–µ –≤—Å–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫—É –≤ —Ü–∏–∫–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ `Normalizer.ProcessNormalization` (—Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
2. –°–æ–∑–¥–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π endpoint –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

**–û–±—â–∏–π —Å—Ç–∞—Ç—É—Å:** ‚úÖ **–ú–ï–•–ê–ù–ò–ó–ú –û–°–¢–ê–ù–û–í–ö–ò –†–ê–ë–û–¢–ê–ï–¢, –¢–†–ï–ë–£–ï–¢–°–Ø –î–û–†–ê–ë–û–¢–ö–ê –î–õ–Ø –ù–û–ú–ï–ù–ö–õ–ê–¢–£–†–´**

