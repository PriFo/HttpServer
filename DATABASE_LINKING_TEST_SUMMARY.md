# –†–µ–∑—é–º–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–≤—è–∑–∫–∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

### –£—Å–ø–µ—à–Ω–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω—ã –º–æ–¥—É–ª–∏:
- ‚úÖ `./server/handlers` - –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ `./database` - –±–µ–∑ –æ—à–∏–±–æ–∫  
- ‚úÖ `./server/services` - –±–µ–∑ –æ—à–∏–±–æ–∫

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (–Ω–µ —Å–≤—è–∑–∞–Ω—ã —Å –Ω–∞—à–∏–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏):
- ‚ö†Ô∏è –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –≤ `server.go` –∏ `kpved_handlers.go` (—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞)
- ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã –≤ legacy handlers (—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞)

## üìã –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 1. Backend API

#### –ù–æ–≤—ã–π –º–µ—Ç–æ–¥ –≤ `ServiceDB`:
- `GetUnlinkedDatabases()` - –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –Ω–µ–ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –±–∞–∑—ã –∏–∑ –ë–î

#### –ù–æ–≤—ã–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ endpoints:
- `GET /api/clients/{id}/databases` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –±–∞–∑—ã
- `GET /api/clients/{id}/statistics` - –≤–∫–ª—é—á–∞–µ—Ç –Ω–µ–ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –±–∞–∑—ã –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- `PUT /api/clients/{id}/databases/{dbId}/link` - —Ä—É—á–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –±–∞–∑—ã –∫ –ø—Ä–æ–µ–∫—Ç—É
- `POST /api/clients/{id}/databases/auto-link` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –≤—Å–µ—Ö –Ω–µ–ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –±–∞–∑

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –í—Å–µ —ç—Ç–∞–ø—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–∏–≤—è–∑–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- –û—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –¥–µ—Ç–∞–ª—è–º–∏
- –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

### 2. Frontend UI

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `databases-tab.tsx`:
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ–ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
- –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–≤—è–∑–∞—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É" –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–µ–ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ–π –±–∞–∑—ã
- –ö–Ω–æ–ø–∫–∞ "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞" –¥–ª—è –≤—Å–µ—Ö –±–∞–∑ —Å—Ä–∞–∑—É
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- Toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ alert
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø—Ä–∏–≤—è–∑–∫–∏

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞

#### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:
1. –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞ (—á–µ—Ä–µ–∑ –ø—Ä–æ–µ–∫—Ç—ã)
2. –ü–æ–ª—É—á–∞–µ—Ç –Ω–µ–ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –±–∞–∑—ã –∏–∑ –ë–î (`GetUnlinkedDatabases`)
3. –°–∫–∞–Ω–∏—Ä—É–µ—Ç –ø–∞–ø–∫—É `uploads` –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
4. –î–ª—è –∫–∞–∂–¥–æ–π –±–∞–∑—ã:
   - –ü—ã—Ç–∞–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
   - –ï—Å–ª–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç - –ø–∞—Ä—Å–∏—Ç –∏–º—è —Ñ–∞–π–ª–∞
   - –ò—â–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø—Ä–æ–µ–∫—Ç –ø–æ —Ç–∏–ø—É –¥–∞–Ω–Ω—ã—Ö
   - –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç –±–∞–∑—É –∫ –ø—Ä–æ–µ–∫—Ç—É

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:
- `test_database_linking.ps1` - PowerShell —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞
2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –±–∞–∑)
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
4. –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –ø—Ä–∏–≤—è–∑–∫–∏

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```powershell
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://127.0.0.1:9999
# –ò–∑–º–µ–Ω–∏—Ç–µ $testClientId –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ID –∫–ª–∏–µ–Ω—Ç–∞
.\test_database_linking.ps1
```

## üìä –û—Ç–≤–µ—Ç API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–∏–≤—è–∑–∫–∏

```json
{
  "message": "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ü—Ä–∏–≤—è–∑–∞–Ω–æ –±–∞–∑: X",
  "linked_count": X,
  "total_databases": Y,
  "unlinked_count": Z,
  "errors": ["..."],
  "error_count": N
}
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
1. ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
2. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. ‚úÖ API endpoints –¥–æ—Å—Ç—É–ø–Ω—ã
4. ‚úÖ UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –Ω–µ–ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –±–∞–∑—ã
5. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
6. ‚úÖ Toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
2. –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —á–µ—Ä–µ–∑ UI

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —É–ª—É—á—à–µ–Ω–∞
- UI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

