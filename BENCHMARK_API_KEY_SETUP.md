# üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–∞ –¥–ª—è –±–µ–Ω—á–º–∞—Ä–∫–∞ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤–æ—Ä–∫–µ—Ä–æ–≤

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ

–ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω: –±–µ–Ω—á–º–∞—Ä–∫ —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç API –∫–ª—é—á –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤–æ—Ä–∫–µ—Ä–æ–≤ (—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î), –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## üìã –°–ø–æ—Å–æ–±—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API –∫–ª—é—á–∞

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ API (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/workers/config/update`:

```bash
curl -X POST http://localhost:9999/api/workers/config/update \
  -H "Content-Type: application/json" \
  -d '{
    "action": "update_provider",
    "data": {
      "name": "arliai",
      "api_key": "–≤–∞—à-api-–∫–ª—é—á-–∑–¥–µ—Å—å",
      "enabled": true,
      "priority": 1,
      "max_workers": 2,
      "rate_limit": 2.0,
      "timeout": "30s",
      "base_url": "https://api.arliai.com",
      "models": [
        {
          "name": "GLM-4.5-Air",
          "enabled": true,
          "priority": 1
        },
        {
          "name": "GLM-4.5",
          "enabled": true,
          "priority": 2
        }
      ]
    }
  }'
```

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è (fallback)

–ï—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ –ë–î –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
# Windows PowerShell
$env:ARLIAI_API_KEY="–≤–∞—à-api-–∫–ª—é—á-–∑–¥–µ—Å—å"

# Linux/Mac
export ARLIAI_API_KEY="–≤–∞—à-api-–∫–ª—é—á-–∑–¥–µ—Å—å"
```

### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ï—Å–ª–∏ –µ—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–æ—Ä–∫–µ—Ä–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ—ë –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API –∫–ª—é—á–∞.

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```bash
curl http://localhost:9999/api/workers/config
```

–û—Ç–≤–µ—Ç –ø–æ–∫–∞–∂–µ—Ç:
- –í—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∏ –∏—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–ª–∏—á–∏–∏ API –∫–ª—é—á–∞ (`has_api_key: true/false`)
- –°–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –∏ –∏—Ö –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

**–í–∞–∂–Ω–æ:** API –∫–ª—é—á –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç–µ –ø–æ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, —Ç–æ–ª—å–∫–æ —Ñ–ª–∞–≥ `has_api_key`.

## üóÑÔ∏è –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `worker_config` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö `service.db`:

```sql
-- –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
SELECT config_json FROM worker_config WHERE id = 1;
```

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ API.

## üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–Ω—á–º–∞—Ä–∫ —Å–µ–π—á–∞—Å

1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1:** –ü–æ–ª—É—á–∞–µ—Ç API –∫–ª—é—á –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤–æ—Ä–∫–µ—Ä–æ–≤ (–ë–î)
2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2:** –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ë–î, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `ARLIAI_API_KEY`
3. **–û—à–∏–±–∫–∞:** –ï—Å–ª–∏ –æ–±–∞ —Å–ø–æ—Å–æ–±–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º

## üìù –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

```json
{
  "action": "update_provider",
  "data": {
    "name": "arliai",
    "api_key": "sk-–≤–∞—à-–∫–ª—é—á",
    "enabled": true,
    "priority": 1,
    "max_workers": 2,
    "rate_limit": 2.0,
    "timeout": "30s",
    "base_url": "https://api.arliai.com",
    "models": [
      {
        "name": "GLM-4.5-Air",
        "provider": "arliai",
        "enabled": true,
        "priority": 1,
        "max_tokens": 4096,
        "temperature": 0.7,
        "cost_per_token": 0.0001,
        "speed": "fast",
        "quality": "high"
      },
      {
        "name": "GLM-4.5",
        "provider": "arliai",
        "enabled": true,
        "priority": 2,
        "max_tokens": 8192,
        "temperature": 0.7,
        "cost_per_token": 0.0002,
        "speed": "medium",
        "quality": "high"
      }
    ]
  }
}
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```bash
   curl http://localhost:9999/api/workers/config | jq '.providers.arliai.has_api_key'
   ```
   –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å `true`

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–µ–Ω—á–º–∞—Ä–∫:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–µ–Ω—á–º–∞—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –±–µ–Ω—á–º–∞—Ä–∫"
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ—à–∏–±–∫–∞ "ARLIAI_API_KEY not configured" –±–æ–ª—å—à–µ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

## üêõ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: API –∫–ª—é—á –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `service.db` –¥–æ—Å—Ç—É–ø–Ω–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `worker_config` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–µ–Ω—á–º–∞—Ä–∫ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é: `curl http://localhost:9999/api/workers/config`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–µ–Ω—á–º–∞—Ä–∫–∞
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –∫–ª—é—á –≤–∞–ª–∏–¥–Ω—ã–π –∏ –∞–∫—Ç–∏–≤–Ω—ã–π

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `serviceDB` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ "Config loaded from service database"

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –ë–î –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞
- API –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ –≤ JSON (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ)

