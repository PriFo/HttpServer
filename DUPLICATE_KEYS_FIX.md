# Исправление дублирующихся ключей React

## Проблема
React выдавал предупреждение:
```
Encountered two children with the same key, `1c_data.db`. Keys should be unique so that components maintain their identity across updates.
```

## Причина
В компоненте `DatabaseSelector` backend мог возвращать несколько записей с одинаковым именем базы данных (например, `1c_data.db`), что приводило к дублирующимся ключам при рендеринге списка.

## Исправления

### `frontend/components/database-selector.tsx`

1. **Фильтрация дубликатов**:
   - Используется `reduce()` для удаления дубликатов по имени
   - При наличии дубликатов предпочтение отдается записи с `isCurrent: true`

2. **Уникальные ключи**:
   - Ключ формируется как: `db.path ? \`${db.path}-${index}\` : \`${db.name}-${index}\``
   - Всегда включает индекс для гарантии уникальности
   - Использует `path`, если доступен, для большей уникальности

### Код исправления:

```typescript
databases
  .reduce((acc, db) => {
    // Убираем дубликаты по имени, предпочитая текущую базу данных
    const existing = acc.find((d) => d.name === db.name)
    if (!existing) {
      acc.push(db)
    } else if (db.isCurrent && !existing.isCurrent) {
      // Заменяем существующую на текущую, если она есть
      const index = acc.indexOf(existing)
      acc[index] = db
    }
    return acc
  }, [] as DatabaseInfo[])
  .map((db, index) => {
    // Создаем уникальный ключ, всегда включая индекс для гарантии уникальности
    const uniqueKey = db.path ? `${db.path}-${index}` : `${db.name}-${index}`
    return (
      <SelectItem key={uniqueKey} value={db.name}>
        {/* ... */}
      </SelectItem>
    )
  })
```

## Результат

- ✅ Дубликаты удаляются перед рендерингом
- ✅ Ключи всегда уникальны благодаря комбинации имени/пути и индекса
- ✅ Предупреждение React больше не появляется
- ✅ Компонент корректно обрабатывает случаи, когда backend возвращает дубликаты

## Проверка

После исправления:
1. Откройте консоль браузера (F12)
2. Проверьте, что предупреждение о дублирующихся ключах больше не появляется
3. Убедитесь, что список баз данных отображается корректно

## Примечания

- Фильтрация дубликатов происходит на уровне компонента
- Если backend возвращает дубликаты, они будут автоматически удалены
- При наличии нескольких записей с одинаковым именем, приоритет отдается текущей базе данных (`isCurrent: true`)

