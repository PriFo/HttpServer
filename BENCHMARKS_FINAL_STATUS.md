# –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç—Ç–∞–ª–æ–Ω–∞–º–∏

## ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ‚úÖ
- **–§–∞–π–ª**: `database/benchmarks_migrations.go`
  - –§—É–Ω–∫—Ü–∏—è `CreateBenchmarksDatabase` - —Å–æ–∑–¥–∞–Ω–∏–µ/–æ—Ç–∫—Ä—ã—Ç–∏–µ –ë–î
  - –§—É–Ω–∫—Ü–∏—è `InitBenchmarksSchema` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã
  - –¢–∞–±–ª–∏—Ü—ã: `benchmarks`, `benchmark_variations`
  - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

- **–§–∞–π–ª**: `database/benchmarks_db.go`
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `BenchmarksDB` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
  - –ú–µ—Ç–æ–¥—ã: `CreateBenchmark`, `GetBenchmark`, `UpdateBenchmark`, `DeleteBenchmark`
  - –ú–µ—Ç–æ–¥—ã: `ListBenchmarks`, `CountBenchmarks`, `FindBestMatch`
  - –ú–µ—Ç–æ–¥—ã: `AddVariations`, `DeleteVariations`

### 2. Backend (Go) ‚úÖ

#### –ú–æ–¥–µ–ª–∏
- **–§–∞–π–ª**: `server/models/benchmark.go`
  - `Benchmark` - –æ—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç—Ç–∞–ª–æ–Ω–∞
  - `BenchmarkVariation` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∞—Ä–∏–∞—Ü–∏–π
  - `CreateBenchmarkRequest` - –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ
  - `CreateBenchmarkFromUploadRequest` - —Å–æ–∑–¥–∞–Ω–∏–µ –∏–∑ –∑–∞–≥—Ä—É–∑–∫–∏
  - `UpdateBenchmarkRequest` - –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
  - `SearchBenchmarkRequest` - –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–∏—Å–∫
  - `ListBenchmarksRequest` - –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–ø–∏—Å–æ–∫
  - `BenchmarkListResponse` - –æ—Ç–≤–µ—Ç —Å–æ —Å–ø–∏—Å–∫–æ–º

#### –°–µ—Ä–≤–∏—Å—ã
- **–§–∞–π–ª**: `server/services/benchmark_service.go`
  - `BenchmarkService` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç—Ç–∞–ª–æ–Ω–∞–º–∏
  - –ú–µ—Ç–æ–¥—ã:
    - `CreateFromUpload` - —Å–æ–∑–¥–∞–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–∞ –∏–∑ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏
    - `FindBestMatch` - –ø–æ–∏—Å–∫ –ª—É—á—à–µ–≥–æ —ç—Ç–∞–ª–æ–Ω–∞ –ø–æ –∏–º–µ–Ω–∏ –∏ —Ç–∏–ø—É
    - `GetByType` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —ç—Ç–∞–ª–æ–Ω–æ–≤ –ø–æ —Ç–∏–ø—É
    - `GetByID` - –ø–æ–ª—É—á–µ–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–∞ –ø–æ ID
    - `List` - —Å–ø–∏—Å–æ–∫ —ç—Ç–∞–ª–æ–Ω–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
    - `Update` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–∞
    - `Delete` - —É–¥–∞–ª–µ–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–∞ (–º—è–≥–∫–æ–µ)
    - `Create` - —Å–æ–∑–¥–∞–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–∞ –≤—Ä—É—á–Ω—É—é

- **–§–∞–π–ª**: `server/services/counterparty_service.go`
  - `BenchmarkFinderAdapter` - –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `normalization.BenchmarkFinder`
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è `BenchmarkService` –≤ `CounterpartyService`

#### –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- **–§–∞–π–ª**: `server/handlers/benchmark.go`
  - `BenchmarkHandler` - HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è API —ç—Ç–∞–ª–æ–Ω–æ–≤
  - –ú–µ—Ç–æ–¥—ã:
    - `CreateFromUpload` - POST `/api/benchmarks/from-upload`
    - `Search` - GET `/api/benchmarks/search?name=...&type=...`
    - `List` - GET `/api/benchmarks?type=...&active=...&limit=...&offset=...`
    - `GetByID` - GET `/api/benchmarks/:id`
    - `Update` - PUT `/api/benchmarks/:id`
    - `Delete` - DELETE `/api/benchmarks/:id`
    - `Create` - POST `/api/benchmarks`

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é ‚úÖ

#### –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞
- **–§–∞–π–ª**: `normalization/normalizer.go`
  - –ü–æ–ª–µ `benchmarkFinder BenchmarkFinder` –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `Normalizer`
  - –ú–µ—Ç–æ–¥ `SetBenchmarkFinder` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞ —ç—Ç–∞–ª–æ–Ω–æ–≤
  - –í `ProcessNormalization`:
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç—Ç–∞–ª–æ–Ω–æ–≤ –ø–µ—Ä–µ–¥ AI-–æ–±—Ä–∞–±–æ—Ç–∫–æ–π (—Å—Ç—Ä–æ–∫–∏ 276-286)
    - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–∞, –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω
    - AI-–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–∞–ª–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω

#### –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã
- **–§–∞–π–ª**: `normalization/counterparty_normalizer.go`
  - –ü–æ–ª–µ `benchmarkFinder BenchmarkFinder` –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `CounterpartyNormalizer`
  - –í `processCounterparty`:
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç—Ç–∞–ª–æ–Ω–æ–≤ –ø–µ—Ä–µ–¥ AI-–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π (—Å—Ç—Ä–æ–∫–∏ 253-272)
    - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–∞, –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω
    - AI-–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–∞–ª–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω

#### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- **–§–∞–π–ª**: `server/server.go`
  - –°–æ–∑–¥–∞–Ω–∏–µ `BenchmarksDB` –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ (—Å—Ç—Ä–æ–∫–∞ 390)
  - –°–æ–∑–¥–∞–Ω–∏–µ `BenchmarkService` (—Å—Ç—Ä–æ–∫–∞ 396)
  - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `BenchmarkFinder` –≤ `Normalizer` (—Å—Ç—Ä–æ–∫–∏ 399-402)
  - –ü–µ—Ä–µ–¥–∞—á–∞ `BenchmarkService` –≤ `CounterpartyService` (—Å—Ç—Ä–æ–∫–∞ 406)
  - –°–æ–∑–¥–∞–Ω–∏–µ `BenchmarkHandler` (—Å—Ç—Ä–æ–∫–∏ 685-688)
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö API —Ä–æ—É—Ç–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 1812-1842)

### 4. Frontend ‚úÖ

#### API Routes
- **–§–∞–π–ª**: `frontend/app/api/benchmarks/route.ts`
  - GET - —Å–ø–∏—Å–æ–∫ —ç—Ç–∞–ª–æ–Ω–æ–≤
  - POST - —Å–æ–∑–¥–∞–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–∞

- **–§–∞–π–ª**: `frontend/app/api/benchmarks/search/route.ts`
  - GET - –ø–æ–∏—Å–∫ —ç—Ç–∞–ª–æ–Ω–æ–≤

- **–§–∞–π–ª**: `frontend/app/api/benchmarks/from-upload/route.ts`
  - POST - —Å–æ–∑–¥–∞–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–∞ –∏–∑ –∑–∞–≥—Ä—É–∑–∫–∏

- **–§–∞–π–ª**: `frontend/app/api/benchmarks/[id]/route.ts`
  - GET - –ø–æ–ª—É—á–µ–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–∞
  - PUT - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–∞
  - DELETE - —É–¥–∞–ª–µ–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–∞

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **–§–∞–π–ª**: `frontend/app/benchmarks/page.tsx`
  - –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç—Ç–∞–ª–æ–Ω–∞–º–∏
  - –¢–∞–±–ª–∏—Ü–∞ —Å–æ –≤—Å–µ–º–∏ —ç—Ç–∞–ª–æ–Ω–∞–º–∏
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É (counterparty/nomenclature)
  - –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
  - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–æ–≤
  - –ü–∞–≥–∏–Ω–∞—Ü–∏—è

- **–§–∞–π–ª**: `frontend/components/quality/CreateBenchmarkDialog.tsx`
  - –î–∏–∞–ª–æ–≥ —Å–æ–∑–¥–∞–Ω–∏—è —ç—Ç–∞–ª–æ–Ω–∞
  - –§–æ—Ä–º–∞ —Å –ø–æ–ª—è–º–∏: entity_type, name, data, variations
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏–∑ –∑–∞–≥—Ä—É–∑–∫–∏ (uploadId, itemIds)

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ

#### Unit —Ç–µ—Å—Ç—ã
- **–§–∞–π–ª**: `server/services/benchmark_service_test.go`
  - –¢–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ `BenchmarkService`

- **–§–∞–π–ª**: `server/handlers/benchmark_handler_test.go`
  - –¢–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö HTTP endpoints

#### E2E —Ç–µ—Å—Ç—ã
- **–§–∞–π–ª**: `tests/e2e/benchmarks.spec.ts`
  - E2E —Ç–µ—Å—Ç—ã –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Ä–∞–±–æ—Ç—ã —Å —ç—Ç–∞–ª–æ–Ω–∞–º–∏

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- **–°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤**: 15+
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~3000+
- **API endpoints**: 7
- **–ú–µ—Ç–æ–¥–æ–≤ —Å–µ—Ä–≤–∏—Å–∞**: 8
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π**: 2 (nomenclature, counterparty)

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —ç—Ç–∞–ª–æ–Ω–æ–≤**: –ü–æ–∏—Å–∫ –≤ —ç—Ç–∞–ª–æ–Ω–∞—Ö –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –æ–±—Ä–∞—â–µ–Ω–∏–µ–º –∫ AI-—Å–µ—Ä–≤–∏—Å–∞–º
2. **–ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏**: –≠—Ç–∞–ª–æ–Ω—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º
3. **–û—Ç–¥–µ–ª—å–Ω–∞—è –ë–î**: –≠—Ç–∞–ª–æ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —á–∏—Å—Ç–æ–π –ë–î (`benchmarks.db`)
4. **–í–∞—Ä–∏–∞—Ü–∏–∏ –Ω–∞–∑–≤–∞–Ω–∏–π**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∞—Ä–∏–∞—Ü–∏–π –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞
5. **–ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ**: –£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥ `is_active`
6. **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –†–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–æ–π –∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º–∏

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

- ‚úÖ `server/services/...` - –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ `server/handlers/...` - –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ `server/models/...` - –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ `normalization/...` - –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ `database/benchmarks_*.go` - –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã, –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã.

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
1. –ó–∞–ø—É—Å–∫ E2E —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ —ç—Ç–∞–ª–æ–Ω–æ–≤ (FTS5 –¥–ª—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞)
3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç—Ç–∞–ª–æ–Ω–æ–≤
4. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —ç—Ç–∞–ª–æ–Ω–æ–≤

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 2024
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

